{{ define "main" }}
<section>
    <quiet-typewriter 
        text="Fleeting" 
        speed="100"
        delay="250"
        style="font-size: 2rem; font-weight: var(--quiet-font-weight-bold);"
        ></quiet-typewriter>
    <div class="h-feed">
        <quiet-random-content unique style="display: flex; flex-direction: column; gap: 1rem;" id="random__overview">
            {{ $pages := (where .Site.Pages.ByLastmod.Reverse "Type" "post") }}
            {{- $paginator := .Paginate $pages (index .Site.Params "archive-paginate" | default 20) }}
            {{- range $paginator.Pages  }}
            {{ if .Title }}
            {{ else }}
            <quiet-card class="e-content" orientation="horizontal" id="card__orientation">
                {{ replace .Content "<img" "<img slot='media' loading='lazy'" }}
                {{ .Content | strings.Truncate 300 }}
                <quiet-button evt-click="randomize" slot="actions" appearance="text" icon-label="Shuffle" pill>
                    <quiet-icon evt-click="randomize" name="arrows-shuffle"></quiet-icon>
                </quiet-button>
            </quiet-card>
            {{ end }}
            {{ end }}
        </quiet-random-content>     
    </div>
    <quiet-typewriter 
            text="Recently updated posts" 
            speed="100"
            delay="1050"
            style="font-size: 2rem; font-weight: var(--quiet-font-weight-bold);"
            ></quiet-typewriter>
    <div class="mt h-feed">
        {{ $pages := (where .Site.Pages.ByLastmod.Reverse "Type" "post") }}
        {{- $paginator := .Paginate $pages (index .Site.Params "archive-paginate" | default 20) }}
        {{- range $paginator.Pages  }}
        {{ if .Title}}
        <div class="item long-post e-content">
            <h4>{{ .Title }}</h4>
            {{ if .Summary}}
            {{ .Summary }}
            {{ else }}
            {{ .Content | strings.Truncate 600 }}
            {{ end }}
        </div>
        {{ end }}
        {{ end }}
    </div>
</section>
<script>
  const randomList = document.getElementById('random__overview');
  document.addEventListener('click', (event) => {
    console.log(event.target)
    if(event.target.getAttribute('evt-click') == 'randomize'){
        console.log(randomList);
        randomList.randomize();
    }
  });
</script>
{{ end }}